<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barcode: Food Date Tracker üçé</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #fdf6e3, #e0f2f1);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }

  .card {
    background: white;
    padding: 24px;
    border-radius: 16px;
    width: 100%;
    max-width: 480px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }

  h1 {
    text-align: center;
    color: #2a7f62;
    margin-top: 0;
  }

  p {
    text-align: center;
    font-size: 0.9rem;
    color: #555;
  }

  input, button, select {
    width: 100%;
    padding: 12px;
    font-size: 1rem;
    border-radius: 10px;
    border: 1px solid #ccc;
    margin-top: 10px;
    box-sizing: border-box;
  }

  button {
    background: #2a7f62;
    color: white;
    border: none;
    cursor: pointer;
  }

  button:hover {
    background: #256d55;
  }

  .suggestions {
    font-size: 0.85rem;
    color: #555;
    margin-top: 6px;
  }

  .slider {
    margin-top: 14px;
    font-size: 0.85rem;
  }

  .result {
    margin-top: 16px;
    padding: 14px;
    border-radius: 12px;
    font-size: 0.9rem;
  }

  .label {
    font-weight: 600;
  }

  .feedback {
    display: flex;
    gap: 10px;
    margin-top: 12px;
  }

  .feedback button {
    flex: 1;
    background: #ddd;
    color: #333;
  }

  .fridge-list {
    margin-top: 16px;
    background: #f0f4f3;
    border-radius: 12px;
    padding: 12px;
  }

  .fridge-item {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    align-items: center;
  }

  .fridge-item span.dot {
    height: 12px;
    width: 12px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 8px;
  }

  .fridge-item.expired .dot { background-color: #d9534f; }
  .fridge-item.warning .dot { background-color: #f0ad4e; }
  .fridge-item.safe .dot { background-color: #5cb85c; }

  .fridge-legend {
    margin: 10px 0;
    font-size: 0.8rem;
    color: #555;
  }

  .fridge-legend div {
    margin-left: 10px;
  }

  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
  }

  .modal-content {
    background: white;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
  }

  .disclaimer {
    font-size: 0.75rem;
    color: #888;
    margin-top: 12px;
    text-align: center;
  }

</style>
</head>

<body>

<div class="card">
  <h1>Barcode: Food Date Tracker üçé</h1>
  <p>Type or scan food to track expiration. Adjust risk tolerance for personal guidance.</p>

  <!-- Food input -->
  <input id="foodInput" placeholder="milk, eggs, bread..." oninput="showSuggestions()">
  <div class="suggestions" id="suggestions"></div>

  <!-- Fake barcode input -->
  <input placeholder="Tap to scan barcode üì¶" onclick="fakeScan()" readonly>

  <!-- Risk slider -->
  <div class="slider">
    Risk tolerance:
    <input type="range" min="0" max="2" value="1" id="riskSlider" onchange="updateRiskLabel()">
    <div id="riskLabel">Moderate</div>
  </div>

  <button onclick="addFood()">Add Food to Fridge</button>

  <div class="fridge-list" id="fridgeList">
    <strong>Fridge List:</strong>

    <!-- Legend -->
    <div class="fridge-legend">
      <strong>Legend:</strong>
      <div><span style="color: #5cb85c;">üü¢ Safe</span> - within shelf-life</div>
      <div><span style="color: #f0ad4e;">üü† Warning</span> - approaching expiration</div>
      <div><span style="color: #d9534f;">üî¥ Expired</span> - past shelf-life</div>
    </div>

    <div id="fridgeItems"></div>
  </div>

  <div class="disclaimer">
    ‚ö†Ô∏è Informational only. Always follow food safety guidelines.
  </div>

  <div class="feedback" id="feedback" style="display:none;">
    <button onclick="sendFeedback(true)">üëç Helpful</button>
    <button onclick="sendFeedback(false)">üëé Not really</button>
  </div>
</div>

<div class="modal" id="scanModal">
  <div class="modal-content">
    <p>üì∏ Scanning barcode...</p>
  </div>
</div>

<script>
const foodData = {
  milk: { date: "Sell By", meaning: "Store selling deadline", days: [3,5,7], tip: "Keep cold ü•õ" },
  eggs: { date: "Best By", meaning: "Peak freshness", days: [14,21,28], tip: "Carton in fridge ü•ö" },
  bread: { date: "Best By", meaning: "Texture & taste", days: [1,3,5], tip: "Freeze extras üçû" },
  cheese: { date: "Use By", meaning: "Safety-focused", days: [3,7,10], tip: "Wrap tightly üßÄ" },
  yogurt: { date: "Best By", meaning: "Flavor date", days: [3,7,10], tip: "Smell test üç¶" },
  chicken: { date: "Use By", meaning: "Safety-focused", days: [1,2,3], tip: "Keep cold üêî" },
  apples: { date: "Best By", meaning: "Flavor date", days: [7,14,21], tip: "Store cool üçè" },
  banana: { date: "Best By", meaning: "Ripeness indicator", days: [1,3,5], tip: "Keep at room temp üçå" },
  orange: { date: "Best By", meaning: "Flavor date", days: [7,10,14], tip: "Keep cool üçä" },
  spinach: { date: "Use By", meaning: "Safety-focused", days: [1,2,3], tip: "Keep cold ü•¨" },
  tomato: { date: "Best By", meaning: "Peak taste", days: [3,5,7], tip: "Store room temp üçÖ" },
  butter: { date: "Best By", meaning: "Flavor & texture", days: [30,60,90], tip: "Keep cold üßà" },
  rice: { date: "Best By", meaning: "Quality-focused", days: [365,730,1095], tip: "Keep dry üçö" },
  pasta: { date: "Best By", meaning: "Quality-focused", days: [365,730,1095], tip: "Keep dry üçù" },
  tuna: { date: "Use By", meaning: "Safety-focused", days: [2,4,6], tip: "Refrigerate üêü" },
  salmon: { date: "Use By", meaning: "Safety-focused", days: [1,2,3], tip: "Keep cold üêü" },
  lettuce: { date: "Use By", meaning: "Safety-focused", days: [2,4,6], tip: "Store cold ü•ó" },
  cucumber: { date: "Best By", meaning: "Quality-focused", days: [3,5,7], tip: "Keep cool ü•í" },
  bell_pepper: { date: "Best By", meaning: "Quality-focused", days: [3,5,7], tip: "Keep cool ü´ë" },
  carrot: { date: "Best By", meaning: "Flavor & quality", days: [7,14,21], tip: "Keep cool ü•ï" },
  onion: { date: "Best By", meaning: "Quality-focused", days: [30,60,90], tip: "Store dry üßÖ" },
  garlic: { date: "Best By", meaning: "Flavor & quality", days: [180,365,540], tip: "Store dry üßÑ" },
  mushroom: { date: "Use By", meaning: "Safety-focused", days: [2,4,6], tip: "Keep cold üçÑ" },
  potato: { date: "Best By", meaning: "Quality-focused", days: [30,60,90], tip: "Store cool ü•î" },
  yogurt_drink: { date: "Best By", meaning: "Flavor date", days: [3,7,10], tip: "Keep cold ü•§" },
  juice: { date: "Use By", meaning: "Safety-focused", days: [3,7,10], tip: "Keep cold üßÉ" },
  cereal: { date: "Best By", meaning: "Quality-focused", days: [365,730,1095], tip: "Keep dry ü•£" },
  peanut_butter: { date: "Best By", meaning: "Quality-focused", days: [365,730,1095], tip: "Keep cool ü•ú" },
  jam: { date: "Best By", meaning: "Quality-focused", days: [180,365,540], tip: "Keep cool üçì" },
  ice_cream: { date: "Use By", meaning: "Safety-focused", days: [30,60,90], tip: "Keep frozen üç®" },
  soda: { date: "Best By", meaning: "Flavor date", days: [180,365,540], tip: "Keep cool ü•§" },
  wine: { date: "Best By", meaning: "Quality-focused", days: [365,730,1095], tip: "Store upright üç∑" },
  beer: { date: "Best By", meaning: "Flavor date", days: [180,365,540], tip: "Keep cold üç∫" },
  tofu: { date: "Use By", meaning: "Safety-focused", days: [3,7,10], tip: "Keep cold ü•¢" },
  soy_sauce: { date: "Best By", meaning: "Quality-focused", days: [365,730,1095], tip: "Keep cool ü•¢" },
  ketchup: { date: "Best By", meaning: "Quality-focused", days: [180,365,540], tip: "Keep cool üçÖ" },
  mustard: { date: "Best By", meaning: "Quality-focused", days: [180,365,540], tip: "Keep cool üå≠" },
  mayonnaise: { date: "Use By", meaning: "Safety-focused", days: [30,60,90], tip: "Keep cold ü•™" },
  coffee: { date: "Best By", meaning: "Flavor-focused", days: [180,365,540], tip: "Keep dry ‚òï" },
  tea: { date: "Best By", meaning: "Flavor-focused", days: [365,730,1095], tip: "Keep dry üçµ" },
  chocolate: { date: "Best By", meaning: "Flavor-focused", days: [180,365,540], tip: "Keep cool üç´" },
  ham: { date: "Use By", meaning: "Safety-focused", days: [3,7,10], tip: "Keep cold üçñ" },
  bacon: { date: "Use By", meaning: "Safety-focused", days: [3,7,10], tip: "Keep cold ü•ì" },
  shrimp: { date: "Use By", meaning: "Safety-focused", days: [1,2,3], tip: "Keep cold üç§" }
};

const foods = Object.keys(foodData);

let fridge = [];

function updateRiskLabel() {
  const risk = parseInt(riskSlider.value);
  riskLabel.textContent = ["Conservative","Moderate","Adventurous"][risk];
}

function showSuggestions() {
  const input = foodInput.value.toLowerCase();
  const matches = foods.filter(f => f.startsWith(input));
  suggestions.textContent = matches.length ? "Try: " + matches.join(", ") : "";
}

function addFood() {
  const food = foodInput.value.toLowerCase();
  const risk = parseInt(riskSlider.value);
  if (!foodData[food]) {
    alert("We don‚Äôt have data for that food yet üòÖ");
    return;
  }

  const today = new Date();
  fridge.push({ name: food, dateAdded: today.toISOString(), risk });
  localStorage.setItem("fridge", JSON.stringify(fridge));
  renderFridge();
  feedback.style.display = "flex";
}

function renderFridge() {
  const container = fridgeItems;
  container.innerHTML = "";
  const now = new Date();

  fridge.forEach((item, index) => {
    const f = foodData[item.name];
    const added = new Date(item.dateAdded);
    const daysPassed = Math.floor((now - added) / (1000*60*60*24));
    const shelf = f.days[item.risk];

    let statusClass = "safe";
    if (daysPassed > shelf) statusClass = "expired";
    else if (daysPassed > shelf * 0.7) statusClass = "warning";

    const div = document.createElement("div");
    div.className = `fridge-item ${statusClass}`;
    div.innerHTML = `
      <span class="dot"></span>
      ${item.name} - ${daysPassed} day(s) old
      <button onclick="removeFood(${index})">‚ùå</button>
    `;
    container.appendChild(div);
  });
}

function removeFood(index) {
  fridge.splice(index, 1);
  localStorage.setItem("fridge", JSON.stringify(fridge));
  renderFridge();
}

function sendFeedback(helpful) {
  alert(helpful ? "Thanks! üëç" : "Got it ‚Äî we‚Äôll improve üëÄ");
}

function fakeScan() {
  scanModal.style.display = "flex";
  setTimeout(() => {
    scanModal.style.display = "none";
    foodInput.value = "milk";
    addFood();
  }, 1500);
}

window.onload = () => {
  const savedFridge = JSON.parse(localStorage.getItem("fridge")) || [];
  fridge = savedFridge;
  renderFridge();
  updateRiskLabel();
};
</script>
</body>
</html>
